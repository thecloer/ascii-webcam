var A=Object.defineProperty;var w=(s,e,n)=>e in s?A(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n;var c=(s,e,n)=>w(s,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(t){if(t.ep)return;t.ep=!0;const i=n(t);fetch(t.href,i)}})();class y{constructor(){c(this,"GRAYSCALE","Ã‘@#WM$9876543210?!abc:+=-,^._        ");c(this,"RESOLUTION",{VIDEO:{width:640,height:480},CANVAS:{width:64,height:48}});c(this,"ELEMENTS",{video:document.getElementById("video"),canvas:document.createElement("canvas"),asciiImage:document.getElementById("ascii-image"),captureButton:document.getElementById("capture-button"),startButton:document.getElementById("start-button")});c(this,"animationId",-1);this.init()}async init(){const{video:e,canvas:n,asciiImage:r,captureButton:t,startButton:i}=this.ELEMENTS;e.width=this.RESOLUTION.VIDEO.width,e.height=this.RESOLUTION.VIDEO.height;try{e.srcObject=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1})}catch(a){console.error(a)}n.width=this.RESOLUTION.CANVAS.width,n.height=this.RESOLUTION.CANVAS.height;const o=n.getContext("2d");o.translate(n.width,0),o.scale(-1,1),i.addEventListener("click",async()=>{try{await e.play(),this.startAnimation(),t.style.display="block",i.style.display="none"}catch(a){console.error("Failed to play video:",a)}}),t.addEventListener("click",()=>{if(this.animationId===-1)return this.startAnimation();this.stopAnimation();const a=r.innerText;navigator.clipboard.writeText(a)})}startAnimation(){this.animationId=window.requestAnimationFrame(()=>this.draw())}stopAnimation(){window.cancelAnimationFrame(this.animationId),this.animationId=-1}draw(){this.animationId=window.requestAnimationFrame(()=>this.draw());const{video:e,canvas:n,asciiImage:r}=this.ELEMENTS,t=this.RESOLUTION.CANVAS.width,i=this.RESOLUTION.CANVAS.height,o=n.getContext("2d",{willReadFrequently:!0});o.drawImage(e,0,0,e.width,e.height,0,0,t,i);const{data:a}=o.getImageData(0,0,t,i);let d="";for(let h=0;h<i;h++){for(let l=0;l<t;l++){const m=(h*t+l)*4,u=a[m],g=a[m+1],f=a[m+2],E=(u+g+f)/3,I=Math.floor(E/255*this.GRAYSCALE.length),p=this.GRAYSCALE.charAt(I);d+=p}d+=`
`}r.innerHTML=d}}new y;
