var w=Object.defineProperty;var O=(s,e,n)=>e in s?w(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n;var r=(s,e,n)=>O(s,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(t){if(t.ep)return;t.ep=!0;const i=n(t);fetch(t.href,i)}})();class p{constructor(){r(this,"GRAYSCALE","Ã‘@#WM$9876543210?!abc:+=-,^._        ");r(this,"RESOLUTION",{VIDEO:{width:640,height:480},CANVAS:{width:64,height:48}});r(this,"ELEMENTS",{video:document.getElementById("video"),canvas:document.getElementById("canvas"),asciiImage:document.getElementById("ascii-image"),captureButton:document.getElementById("capture-button")});r(this,"animationId",-1);this.init(),this.startAnimation()}async init(){const{video:e,canvas:n,asciiImage:a,captureButton:t}=this.ELEMENTS;e.width=this.RESOLUTION.VIDEO.width,e.height=this.RESOLUTION.VIDEO.height;try{e.srcObject=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1})}catch(o){console.error(o)}n.width=this.RESOLUTION.CANVAS.width,n.height=this.RESOLUTION.CANVAS.height;const i=n.getContext("2d");i.translate(n.width,0),i.scale(-1,1),t.addEventListener("click",()=>{if(this.animationId===-1)return this.startAnimation();this.stopAnimation();const o=a.innerText;navigator.clipboard.writeText(o)})}startAnimation(){this.animationId=window.requestAnimationFrame(()=>this.draw())}stopAnimation(){window.cancelAnimationFrame(this.animationId),this.animationId=-1}draw(){this.animationId=window.requestAnimationFrame(()=>this.draw());const{video:e,canvas:n,asciiImage:a}=this.ELEMENTS,t=this.RESOLUTION.CANVAS.width,i=this.RESOLUTION.CANVAS.height,o=n.getContext("2d",{willReadFrequently:!0});o.drawImage(e,0,0,e.width,e.height,0,0,t,i);const{data:c}=o.getImageData(0,0,t,i);let d="";for(let h=0;h<i;h++){for(let m=0;m<t;m++){const l=(h*t+m)*4,u=c[l],g=c[l+1],f=c[l+2],I=(u+g+f)/3,E=Math.floor(I/255*this.GRAYSCALE.length),A=this.GRAYSCALE.charAt(E);d+=A}d+=`
`}a.innerHTML=d}}new p;
